{"mappings":"6vBAAAA,EAAA,0GCAA,IAAAC,EAAAD,EAAA,mCAIO,MAAME,EAEZC,cAECC,KAAKC,aAAe,IAAIC,EAAAC,sBAIzBC,eAAgBC,EAAOC,EAAU,IAEhC,MAdFL,aAcUA,GAAiBD,KACnBO,EAAS,GAEfF,EAAMG,UAAUC,IAEVA,EAAEC,QAENH,EAAOI,KAAMF,MAMf,MA3BFG,SA2BUA,EA3BVC,UA2BoBA,EA3BpBC,SA2B+BA,GAAaC,EAAAC,YAAaT,EAAQ,CAAEU,WAAY,CAAE,WAAY,SAAU,UAAW,QAC1GC,EAAajB,EAAakB,SAAUP,EAAU,CAAEQ,SAAUvB,EAAAwB,OAAQf,EAASgB,YAAa,IAE9F,MAAO,CA9BTjB,MA+BGA,EA/BHQ,UAgCGA,EAhCHC,SAiCGA,EACAS,UAAWL,GAKbM,UAECxB,KAAKC,aAAawB","sources":["src/index.js","src/core/PathTracingSceneGenerator.js"],"sourcesContent":["export * from './core/PathTracingRenderer.js';\nexport * from './core/PathTracingSceneGenerator.js';\nexport * from './core/MaterialReducer.js';\n\nexport * from './uniforms/MaterialStructArrayUniform.js';\nexport * from './uniforms/MaterialStructUniform.js';\nexport * from './uniforms/RenderTarget2DArray.js';\n\nexport * from './utils/GeometryPreparationUtils.js';\n","import { SAH } from 'three-mesh-bvh';\nimport { GenerateMeshBVHWorker } from 'three-mesh-bvh/src/workers/GenerateMeshBVHWorker.js';\nimport { mergeMeshes } from '../utils/GeometryPreparationUtils.js';\n\nexport class PathTracingSceneGenerator {\n\n\tconstructor() {\n\n\t\tthis.bvhGenerator = new GenerateMeshBVHWorker();\n\n\t}\n\n\tasync generate( scene, options = {} ) {\n\n\t\tconst { bvhGenerator } = this;\n\t\tconst meshes = [];\n\n\t\tscene.traverse( c => {\n\n\t\t\tif ( c.isMesh ) {\n\n\t\t\t\tmeshes.push( c );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tconst { geometry, materials, textures } = mergeMeshes( meshes, { attributes: [ 'position', 'normal', 'tangent', 'uv' ] } );\n\t\tconst bvhPromise = bvhGenerator.generate( geometry, { strategy: SAH, ...options, maxLeafTris: 1 } );\n\n\t\treturn {\n\t\t\tscene,\n\t\t\tmaterials,\n\t\t\ttextures,\n\t\t\tbvh: await bvhPromise,\n\t\t};\n\n\t}\n\n\tdispose() {\n\n\t\tthis.bvhGenerator.terminate();\n\n\t}\n\n}\n"],"names":["parcelRequire","$8Zfx2","$d0f6adfc7402c638$export$245b5237bb7038ea","constructor","this","bvhGenerator","$a8VBx","GenerateMeshBVHWorker","async","scene","options","meshes","traverse","c","isMesh","push","geometry","materials","textures","$jM3IF","mergeMeshes","attributes","bvhPromise","generate","strategy","SAH","maxLeafTris","bvh","dispose","terminate"],"version":3,"file":"aoRender.36f0b05a.js.map"}